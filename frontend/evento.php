<?php 

$conexao = new PDO('pgsql:host=127.0.0.1;port=5432;dbname=cuida','postgres', '1234');

if ($conexao) {
  $select_usuario = "SELECT identificador FROM usuarios WHERE email='".$_REQUEST['email']."'";

  $comandoSelectUsuario = $conexao->query($select_usuario);

  $id_usuario = $comandoSelectUsuario->fetch();

  $select1 = "SELECT eventos.titulo, eventos.descricao, eventos.data_hora, usuarios.nome as adm  FROM eventos INNER JOIN usuarios ON eventos.adm = usuarios.identificador WHERE eventos.identificador = ".$_REQUEST['identificador'];
  $select2 = "SELECT identificador as inscricao  FROM inscricoes WHERE evento_id = ".$_REQUEST['identificador']." AND usuario_id = $id_usuario[0]";

  $comandoSelect1 = $conexao->query($select1);
  $evento         = $comandoSelect1->fetch();

  $comandoSelect2 = $conexao->query($select2);
  $inscricao      = $comandoSelect2->fetch();

}

?>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body class="overflow-hidden" style="background: #E2E6ED;">
    <nav class="navbar navbar-expand-lg bg-nav shadow vw-100">
			<div class="container-fluid">
				<a class="navbar-brand" href="#"><h1 class="display-1 fw-medium text-light">Cuida!</h1></a>
				<div class="collapse navbar-collapse" id="navbarText">
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">					
						<li class="nav-item">
							<p class="active text-light h1 fst-italic">Evento</p>
						</li>
					</ul>
					<span class="navbar-text">
						<svg xmlns="http://www.w3.org/2000/svg" height="96" viewBox="0 0 104 105" fill="none"> 
						  <path d="M52 7H13C11.2761 7 9.62279 7.68482 8.40381 8.90381C7.18482 10.1228 6.5 11.7761 6.5 13.5V52.5C6.5 64.8013 10.2147 76.212 17.9205 84.5775C18.2932 84.9848 18.6767 85.3835 19.071 85.7735C19.9128 85.2828 20.891 85 21.9375 85C23.4 85 24.7878 84.155 25.5028 82.868C24.516 82.0266 23.5805 81.1269 22.7013 80.1738C16.3248 73.2513 13 63.5337 13 52.5C13 50.1102 13.1549 47.7886 13.4648 45.5353L45.0678 13.9322C47.3671 13.6429 49.6825 13.4985 52 13.5C64.298 13.5 73.463 17.2895 79.7843 23.2858C79.9988 23.2641 80.2165 23.2522 80.4375 23.25C82.5435 23.25 84.5 21.4917 84.5 19.1875C84.5 19.064 84.5043 18.9405 84.513 18.817C76.817 11.3778 65.884 7 52 7ZM13 13.5H20.8455L13 21.3455V13.5ZM27.9045 13.5H36.309L13 36.809V28.4045L27.9045 13.5ZM52 98C43.81 98 36.647 96.4758 30.5663 93.7002C32.5101 92.3949 34.1352 90.6687 35.321 88.6497C40.0595 90.4762 45.6073 91.5 52 91.5C65.3185 91.5 74.9613 87.054 81.2988 80.1738C83.2216 78.0785 84.8696 75.7468 86.203 73.235C89.5941 72.5209 92.7126 70.8585 95.1958 68.4413C93.3238 74.496 90.3013 79.9918 86.0795 84.5775C78.3348 92.9885 66.8558 98 52 98Z" fill="white"/>
						  <path d="M74.308 45.1193C75.6308 43.3545 77.363 41.9115 79.3618 40.93C79.0852 40.5194 78.7777 40.1304 78.442 39.7665C76.5765 37.719 73.762 36.25 69.875 36.25C66.027 36.25 63.2222 37.6508 61.347 39.695C59.566 41.632 58.8477 43.8973 58.5617 45.3825C58.4694 45.8058 58.4626 46.2433 58.5418 46.6692C58.6209 47.0952 58.7845 47.501 59.0228 47.8629C59.2611 48.2247 59.5693 48.5353 59.9294 48.7762C60.2894 49.0172 60.694 49.1838 61.1194 49.2661C61.5447 49.3485 61.9823 49.3449 62.4062 49.2557C62.8302 49.1665 63.2321 48.9934 63.5882 48.7467C63.9443 48.4999 64.2474 48.1844 64.4799 47.8188C64.7123 47.4531 64.8692 47.0447 64.9415 46.6175C65.0975 45.818 65.455 44.83 66.1343 44.0923C66.7193 43.4552 67.7528 42.75 69.875 42.75C71.9615 42.75 73.0243 43.4715 73.6353 44.1442C73.9147 44.4465 74.1357 44.7845 74.308 45.1193ZM96.9182 44.2547C94.9124 42.061 92.2856 40.5305 89.388 39.8672C88.7691 37.5635 87.9401 35.3213 86.9115 33.169C88.9306 32.2238 90.7287 30.8653 92.1895 29.1812C94.5717 33.7832 96.1382 38.876 96.9182 44.2547ZM33.6342 44.0923C32.9517 44.83 32.5943 45.8148 32.4415 46.6208C32.2769 47.4672 31.7827 48.2136 31.0678 48.6957C30.3529 49.1778 29.4757 49.3561 28.6292 49.1915C27.7828 49.0269 27.0364 48.5327 26.5543 47.8178C26.0722 47.1029 25.8939 46.2257 26.0585 45.3792C26.3477 43.8973 27.066 41.632 28.847 39.695C30.7223 37.6508 33.527 36.25 37.375 36.25C41.2588 36.25 44.0765 37.719 45.942 39.7665C47.71 41.7067 48.4445 43.9655 48.7045 45.4443C48.8519 46.2937 48.6558 47.1669 48.1594 47.8718C47.6629 48.5767 46.9068 49.0555 46.0574 49.2029C45.2079 49.3503 44.3347 49.1542 43.6298 48.6577C42.9249 48.1613 42.4461 47.4052 42.2988 46.5557C42.1356 45.6617 41.7335 44.8284 41.1352 44.1442C40.5275 43.4715 39.4615 42.75 37.375 42.75C35.2528 42.75 34.216 43.4552 33.6342 44.089M84.5 13.5C85.362 13.5 86.1886 13.1576 86.7981 12.5481C87.4076 11.9386 87.75 11.112 87.75 10.25C87.75 9.38805 87.4076 8.5614 86.7981 7.9519C86.1886 7.34241 85.362 7 84.5 7C83.638 7 82.8114 7.34241 82.2019 7.9519C81.5924 8.5614 81.25 9.38805 81.25 10.25C81.25 11.112 81.5924 11.9386 82.2019 12.5481C82.8114 13.1576 83.638 13.5 84.5 13.5ZM90.1875 16.75C90.834 16.75 91.454 17.0068 91.9111 17.4639C92.3682 17.921 92.625 18.541 92.625 19.1875C92.625 26.331 86.671 31.375 80.4375 31.375C79.791 31.375 79.171 31.1182 78.7139 30.6611C78.2568 30.204 78 29.584 78 28.9375C78 28.291 78.2568 27.671 78.7139 27.2139C79.171 26.7568 79.791 26.5 80.4375 26.5C84.2042 26.5 87.75 23.419 87.75 19.1875C87.75 18.541 88.0068 17.921 88.4639 17.4639C88.921 17.0068 89.541 16.75 90.1875 16.75ZM31.6875 78.5C32.334 78.5 32.954 78.7568 33.4111 79.2139C33.8682 79.671 34.125 80.291 34.125 80.9375C34.125 88.081 28.171 93.125 21.9375 93.125C21.291 93.125 20.671 92.8682 20.2139 92.4111C19.7568 91.954 19.5 91.334 19.5 90.6875C19.5 90.041 19.7568 89.421 20.2139 88.9639C20.671 88.5068 21.291 88.25 21.9375 88.25C25.7043 88.25 29.25 85.169 29.25 80.9375C29.25 80.291 29.5068 79.671 29.9639 79.2139C30.421 78.7568 31.041 78.5 31.6875 78.5ZM87.75 94.75C88.612 94.75 89.4386 94.4076 90.0481 93.7981C90.6576 93.1886 91 92.362 91 91.5C91 90.638 90.6576 89.8114 90.0481 89.2019C89.4386 88.5924 88.612 88.25 87.75 88.25C86.888 88.25 86.0614 88.5924 85.4519 89.2019C84.8424 89.8114 84.5 90.638 84.5 91.5C84.5 92.362 84.8424 93.1886 85.4519 93.7981C86.0614 94.4076 86.888 94.75 87.75 94.75ZM32.5 65.5C32.5 66.362 32.1576 67.1886 31.5481 67.7981C30.9386 68.4076 30.112 68.75 29.25 68.75C28.388 68.75 27.5614 68.4076 26.9519 67.7981C26.3424 67.1886 26 66.362 26 65.5C26 64.638 26.3424 63.8114 26.9519 63.2019C27.5614 62.5924 28.388 62.25 29.25 62.25C30.112 62.25 30.9386 62.5924 31.5481 63.2019C32.1576 63.8114 32.5 64.638 32.5 65.5ZM85.5432 42.75C84.1257 42.7496 82.722 43.0285 81.4123 43.5707C80.1027 44.113 78.9126 44.908 77.9103 45.9103C76.908 46.9126 76.113 48.1027 75.5707 49.4123C75.0285 50.722 74.7496 52.1257 74.75 53.5432V54.9375C74.75 55.8978 74.9391 56.8487 75.3066 57.7359C75.6741 58.6231 76.2128 59.4292 76.8918 60.1082C77.5708 60.7872 78.3769 61.3259 79.2641 61.6934C80.1513 62.0609 81.1022 62.25 82.0625 62.25C83.5709 62.25 85.0176 61.6508 86.0842 60.5842C87.1508 59.5176 87.75 58.0709 87.75 56.5625V54.9375C87.75 54.291 87.4932 53.671 87.0361 53.2139C86.579 52.7568 85.959 52.5 85.3125 52.5C84.666 52.5 84.046 52.7568 83.5889 53.2139C83.1318 53.671 82.875 54.291 82.875 54.9375V56.5625C82.875 56.778 82.7894 56.9847 82.637 57.137C82.4847 57.2894 82.278 57.375 82.0625 57.375C81.416 57.375 80.796 57.1182 80.3389 56.6611C79.8818 56.204 79.625 55.584 79.625 54.9375V53.5432C79.625 50.2737 82.277 47.625 85.5432 47.625H86.125C87.8489 47.625 89.5022 48.3098 90.7212 49.5288C91.9402 50.7478 92.625 52.4011 92.625 54.125V55.2982C92.6241 58.0037 91.549 60.598 89.636 62.511C87.723 64.424 85.1287 65.4991 82.4232 65.5H65.416C65.5482 64.915 65.6153 64.3083 65.6175 63.68C65.6175 62.6045 65.4057 61.5395 64.9941 60.5458C64.5825 59.5522 63.9792 58.6493 63.2187 57.8888C62.4582 57.1283 61.5553 56.525 60.5617 56.1134C59.568 55.7018 58.503 55.49 57.4275 55.49C56.5655 55.49 55.7389 55.8324 55.1294 56.4419C54.5199 57.0514 54.1775 57.878 54.1775 58.74C54.1775 59.602 54.5199 60.4286 55.1294 61.0381C55.7389 61.6476 56.5655 61.99 57.4275 61.99C57.6494 61.99 57.8692 62.0337 58.0742 62.1186C58.2793 62.2036 58.4656 62.3281 58.6225 62.485C58.7794 62.6419 58.9039 62.8282 58.9889 63.0333C59.0738 63.2383 59.1175 63.4581 59.1175 63.68C59.1175 63.9019 59.0738 64.1217 58.9889 64.3267C58.9039 64.5318 58.7794 64.7181 58.6225 64.875C58.4656 65.0319 58.2793 65.1564 58.0742 65.2414C57.8692 65.3263 57.6494 65.37 57.4275 65.37C56.5655 65.37 55.7389 65.7124 55.1294 66.3219C54.5199 66.9314 54.1775 67.758 54.1775 68.62C54.1775 69.4819 54.5199 70.3086 55.1294 70.9181C55.7389 71.5276 56.5655 71.87 57.4275 71.87C57.8757 71.87 58.3056 72.0481 58.6225 72.365C58.9394 72.6819 59.1175 73.1118 59.1175 73.56C59.1175 74.0082 58.9394 74.4381 58.6225 74.755C58.3056 75.072 57.8757 75.25 57.4275 75.25C56.5655 75.25 55.7389 75.5924 55.1294 76.2019C54.5199 76.8114 54.1775 77.638 54.1775 78.5C54.1775 79.362 54.5199 80.1886 55.1294 80.7981C55.7389 81.4076 56.5655 81.75 57.4275 81.75C58.7791 81.7502 60.1098 81.4159 61.3008 80.7768C62.4918 80.1378 63.5061 79.214 64.2533 78.0877C65.0006 76.9614 65.4574 75.6677 65.5832 74.3219C65.7089 72.9762 65.4996 71.6202 64.974 70.375H82.4265C86.4243 70.3733 90.2578 68.7842 93.0843 65.957C95.9109 63.1299 97.4991 59.296 97.5 55.2982V54.125C97.5 51.1082 96.3016 48.2149 94.1683 46.0817C92.0351 43.9484 89.1418 42.75 86.125 42.75H85.5432Z" fill="white"/>
						</svg>
					</span>
				</div>
			</div>
		</nav>
		
    <div class="vh-100 w-25 bg-info bg-gradient d-inline-flex align-items-center flex-column pt-5">
    <h1 class="display-6 fw-medium text-light text-center mb-3"><?php echo $evento['titulo'] ?></h1>
      <button type="button" class="btn btn-warning text-white"><a href="<?php if( $inscricao ){ echo'./meuseventos.php?email='.$_REQUEST['email']; } else{ echo'../backend/inscreverse.php?email='.$_REQUEST['email'].'&identificador='.$_REQUEST['identificador']; } ?>" class="text-white">Inscrever-se</a></button>
    </div>
    <div class="d-inline-flex w-50 ms-5 ps-5 gap-4 flex-wrap justify-content-center"  >
      <div class="d-flex align-items-center flex-column">
        <h1 class="text-secondary"> Data </h1>
			<ul>
				<li class=" fw-medium text-tertiary" > <?php $data = date_create($evento['data_hora']); echo date_format($data, "d/m/Y") ?> </li>
			</ul>
		</div>
		<div class="d-flex align-items-center flex-column">
    <h1 class="text-secondary"> Organização </h1>
			<ul>
				<li class=" fw-medium text-tertiary" > <?php echo $evento['adm'] ?> </li>
			</ul>
		</div>
		<div class="d-flex align-items-center flex-column">
    <h1 class="text-secondary"> Descrição </h1>
			<ul>
				<li class=" fw-medium text-tertiary" > <?php echo $evento['descricao'] ?> </li>
			</ul>
		</div>
		<div class="d-flex align-items-center flex-column">
    <h1 class="text-secondary"> Horário </h1>
			<ul>
				<li class=" fw-medium text-tertiary" > <?php $data = date_create($evento['data_hora']); echo date_format($data, "h:i:s") ?></li>
			</ul>
		</div>
	</div>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>